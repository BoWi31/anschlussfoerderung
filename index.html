<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Anschlussf√∂rderung</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
            transition: background-color 0.5s ease;
        }
        .status-container {
            padding: 20px;
            border-radius: 10px;
            background: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 400px;
            transition: all 0.3s ease-in-out;
        }
        h1, p {
            margin: 0;
            color: black;
        }
        .students {
            text-align: left;
            margin-top: 15px;
            font-size: 0.9em;
        }
        .students ul {
            list-style-type: none;
            padding: 0;
        }
        .students li {
            margin-bottom: 5px;
        }
        .simulation-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 1.5em;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .simulation-btn:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div id="status" class="status-container">
        <h1>Keine Anschlussf√∂rderung</h1>
        <p><strong>N√§chste F√∂rderung:</strong> Wird geladen...</p>
        <p id="countdown"></p>
        <div class="students" id="students-container"></div>
    </div>
    <button class="simulation-btn" id="simulate">üîò</button>

    <script>
        const foerderzeiten = [
            { fach: "Deutsch", day: 1, start: "07:40", end: "09:30", students: ["Anastasia", "Alina", "Vojdan", "Daniil", "Mohammed H.", "Mohammed L.", "Marin", "Evelina", "Ilyas", "Beyar", "Emma", "Artur"] },
            { fach: "Mathe", day: 2, start: "11:20", end: "13:10", students: ["Anastasia", "Alina", "Vojdan", "Daniil", "Mohammed H.", "Mohammed L.", "Marin", "Evelina", "Ilyas", "Beyar", "Emma", "Artur"] },
            { fach: "Englisch", day: 3, start: "09:30", end: "11:20", students: ["Anastasia", "Alina", "Vojdan", "Daniil", "Mohammed H.", "Mohammed L.", "Marin", "Evelina", "Ilyas", "Beyar", "Emma", "Artur"] },
        ];

        let simulationMode = false;

        function updateStatus() {
            const now = new Date();
            const currentDay = now.getDay();
            const currentTime = now.getHours() * 60 + now.getMinutes();

            let activeSession = null;
            let nextSession = null;

            foerderzeiten.forEach(session => {
                const sessionStart = parseInt(session.start.split(":")[0]) * 60 + parseInt(session.start.split(":")[1]);
                const sessionEnd = parseInt(session.end.split(":")[0]) * 60 + parseInt(session.end.split(":")[1]);

                if (currentDay === session.day && currentTime >= sessionStart && currentTime <= sessionEnd) {
                    activeSession = session;
                } else if (!nextSession && (currentDay < session.day || (currentDay === session.day && currentTime < sessionStart))) {
                    nextSession = session;
                }
            });

            const statusContainer = document.getElementById("status");
            const studentsContainer = document.getElementById("students-container");

            if (simulationMode && nextSession) {
                activeSession = nextSession;
            }

            if (activeSession) {
                document.body.style.backgroundColor = "#dc3545";
                statusContainer.innerHTML = `
                    <h1>Anschlussf√∂rderung aktiv</h1>
                    <p><strong>Fach:</strong> ${activeSession.fach} (${activeSession.start}-${activeSession.end})</p>
                    <div class="students">
                        ${activeSession.students.map(student => `<li>${student}</li>`).join("")}
                    </div>
                `;
            } else {
                document.body.style.backgroundColor = "#28a745";
                const countdown = nextSession ? calculateCountdown(nextSession.day, nextSession.start) : "Keine weiteren Termine!";
                statusContainer.innerHTML = `
                    <h1>Keine Anschlussf√∂rderung</h1>
                    <p><strong>N√§chste F√∂rderung:</strong> ${nextSession ? `${nextSession.fach} am ${formatDay(nextSession.day)} (${nextSession.start})` : "Keine weiteren Termine!"}</p>
                    <p id="countdown">${countdown}</p>
                `;
            }
        }

        function calculateCountdown(day, startTime) {
            const now = new Date();
            const nextDate = new Date();

            const [startHour, startMinute] = startTime.split(":").map(Number);
            nextDate.setHours(startHour, startMinute, 0, 0);

            if (now.getDay() > day || (now.getDay() === day && now.getTime() > nextDate.getTime())) {
                nextDate.setDate(nextDate.getDate() + (7 - (now.getDay() - day)));
            }

            const diff = nextDate - now;
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);

            return `${hours}h ${minutes}m ${seconds}s`;
        }

        function formatDay(day) {
            const days = ["Sonntag", "Montag", "Dienstag", "Mittwoch", "Donnerstag", "Freitag", "Samstag"];
            return days[day];
        }

        document.getElementById("simulate").addEventListener("click", () => {
            simulationMode = !simulationMode;
            updateStatus();
            document.getElementById("simulate").innerText = simulationMode ? "Aktueller Status?" : "N√§chste Anschlussf√∂rderung?";
        });

        setInterval(updateStatus, 1000);
    </script>
</body>
</html>
